<style>
	.header-container {
		height: 400px;
		width: 100%;
		text-align: center;
	}

	.ethereum-logo {
		max-width: 320px;
		max-height: 139px;
		margin-top: 80px;
	}

	.project-title {
		font-size: 4em;
		font-family: 'Lato', sans-serif;
		margin-top: 10px;
		text-align: center;
	}

	.project-date {
		font-style: italic;
		text-align: center;
	}

	.project-content {
		margin-top: 50px;
		font-size: 1.1em;
	}

	.title-icon {
		font-size: 0.9em;
	}

	p {
		font-family: "Roboto", sans-serif;
		font-weight: 300;
	}

	.normal-code {
		width: 80%;
		margin: 30px auto;
		background-color: #f5f2f0;
		font-family: 'Monaco', sans-serif !important;
		text-align: left;
	}

	.project-photo {
		width: 100%;
	}

	.caption {
		margin-top: 7px;
		text-align: center;
		width: 100%;
		color: darkgrey;
	}

	.project-description {
		font-size: 1.2em;
		text-align: center;
	}

	.toc-margin {
		margin-top: 100px;
	}

	.toc-header {
		font-weight: 600;
	}

	.table-of-contents a.active {
		border-left: 2px solid #03A9F4;
	}

	.table-of-contents a:hover {
		border-left: 1px solid #03A9F4;
	}

	@media only screen and (min-width : 992px) {
		.project-container {
			width: 90%;
			margin-left: auto;
			margin-right: auto;
		}
	}

	@media only screen and (max-width: 991px) {
		.media-container {
			float: none;
		}
		.media-icon {
			max-width: 200px;
		}
		.project-content {
			text-align: center;
			padding-left: 20px;
			padding-right: 20px;
		}
		.project-description {
			margin-top: 20px;
		}
	}

	/* Extra Small Devices, Phones */
	@media only screen and (max-width : 480px) {
		.normal-code {
			width: 100%;
		}
	}

	.pinned {
		position: fixed !important;
	}


</style>

<div class="header-container">
	<img src="https://firebasestorage.googleapis.com/v0/b/william-9ab03.appspot.com/o/projectImages%2Ffrathouse%2Flogo.png?alt=media&token=127fbae6-6483-4783-92b7-0c144a5555e9" class="ethereum-logo">
	<div class="project-title">FratHouse</div>
	<div class="project-date">Completed September 2017</div>
</div>

<div class="project-container">

	<div class="row">
		<div class="col s12 m9 l10">

			<div id="overview" class="section scrollspy">

				<h2 class="center-align">Project Overview</h2>

				<div class="row project-content">
					<div class="project-description center">
						<p>
							FratHouse is an online finance tracker tool. It helps students who live in a house together keep track
							of what expenses are incurred. It helps split expenses between house members and manages each member's outstanding and owed expenses
							so that users don't have to worry about splitting costs every time they get groceries together. Each member's accumulated expenses are clearly
							shown, including how much each house member owes each other.
						</p>
						<p>
							This project is powered by Angular 4, Google Firebase, and Google Cloud Functions.
						</p>
					</div>
				</div>

			</div>

			<div id="functionality" class="section scrollspy">

				<h2 class="center-align">Functionality</h2>

				<div class="row project-content">
					<div class="row">
						<img class="project-photo"
							 src="https://firebasestorage.googleapis.com/v0/b/william-9ab03.appspot.com/o/projectImages%2Ffrathouse%2Fexpenses.png?alt=media&token=2fe83650-5f87-4f9b-80fc-2caf66b6c535">
						<div class="caption">When viewing the expenses page.</div>
					</div>
					<div class="row project-description center">
						<p>
							Once a user logs in to the application, they are presented with a side navigation menu with links
							to view the user's dashboard, expenses page, a list of houses the user is a member of, and a breakdown of all the
							transactions the user has incurred. The dashboard offers an overview of all the user's data. In the expenses page (shown above),
							the user can view a list of both their owed and outstanding expenses. The user can then click on any of the expenses to view it in the
							detail pane in the middle. From there, the user announce to the group that they have paid for the expense, and also see a list of the other
							members that are involved in this expense.
						</p>
					</div>
				</div>


				<div class="row project-content">
					<div class="row">
						<img class="project-photo"
							 src="https://firebasestorage.googleapis.com/v0/b/william-9ab03.appspot.com/o/projectImages%2Ffrathouse%2Ftransactions.png?alt=media&token=80cc759e-743f-4824-a944-813da75978b6">
						<div class="caption">When viewing the transactions list.</div>
					</div>
					<div class="row project-description center">
						<p>
							In the transactions list, the user can review all of the transactions that concern him. Clicking any transaction will bring out the details
							which show which expense created the transaction, and which house the transaction belongs to.
						</p>
					</div>
				</div>

				<div class="row project-content">
					<div class="row">
						<img class="project-photo"
							 src="https://firebasestorage.googleapis.com/v0/b/william-9ab03.appspot.com/o/projectImages%2Ffrathouse%2Fhouse.jpg?alt=media&token=53ddedda-3e6c-4126-b570-7d140ba4bac8">
						<div class="caption">The house view.</div>
					</div>
					<div class="row project-description center">
						<p>
							From the house view, the user can add/delete members depending on if they are the admin of the group (creator of the house). All users can also see
							any owed/outstanding expenses within the house, and click into any of them to bring the expense details.
						</p>
					</div>
				</div>

			</div>

			<div id="authentication" class="section scrollspy">

				<h2 class="center-align">Authentication</h2>

				<div class="row project-content">
					<div class="col m6 l2">
						<img class="project-photo"
							 src="https://firebasestorage.googleapis.com/v0/b/william-9ab03.appspot.com/o/projectImages%2Ffriday%2Flogin.png?alt=media&token=42cf5e1c-4dd7-4837-a24a-a7c203574750">
					</div>
					<div class="col m6 l10 project-description">
						<p>
							Authentication in Frathouse is handled with Firebase Authentication services. This allows
							the application to easily offer Google OAuth sign in functionality. This also allows token
							communication with the server so the user doesn't have to login every time they visit the website.
							The login modal also offers a forgot password link, where the user can enter their email and
							receive a password reset email.
						</p>
					</div>
				</div>

			</div>

			<div id="database" class="section scrollspy">

				<h2 class="center-align"><i class="material-icons title-icon">storage</i> Firebase Real-Time Database</h2>

				<div class="row project-content">
					<div class="col s12 project-description">
						<p>
							All of the data for this application is hosted on Firebase's Real-Time Database. This allowed for easy access by the
							angular client, and enable easy CRUD and query operations on the data. The firebase database database enabled this application
							to sync across all it's members, which becomes important when multiple group members are reviewing expenses together.
						</p>
					</div>
				</div>

			</div>

			<div id="functions" class="section scrollspy">

				<h2 class="center-align">Google Cloud Functions</h2>

				<div class="row project-content">
					<div class="col s12 project-description">
						<p>
							Since some nodes in the firebase database are secured through security rules and can only be accessed by the user themselves,
							google cloud functions must be used when certain data needs to be added to user's nodes from other users accounts. For example,
							when an expense is created, the application must add this expense to the owed expenses of all the members who are involved. To do so,
							a google cloud function is set up to make this write operation, since all cloud functions have admin controls.
						</p>
					</div>
				</div>

				<pre class="normal-code">
exports.addExpenseToUsersOwedExpenses = functions.database.ref('/expenses/&#123;expenseId&#125;')
.onWrite(event => &#123;
	if (event.data.previous.exists()) &#123;
		return;
	&#125;
	// Exit when the data is deleted.
	if (!event.data.exists()) &#123;
		return;
	&#125;

	// Grab the current value of what was written to the database
	const original = event.data.val();
	const toUpdate = &#123;&#125;;

	Object.keys(original.payers).forEach(function(key) &#123;
		// The push id can be found by looking at the ref defined in the function definition
		console.log('expense object: ', original);
		toUpdate['/owedExpensesPerUser/' + key + '/' + original.house + '/' + event.params.expenseId] = original.amount;
	&#125;);

	return firebaseUpdate(toUpdate);

&#125;);</pre>

				<div class="caption">An example of one of the cloud functions that power FratHouse.</div>

			</div>

			<div id="code" class="section scrollspy">

				<h2 class="center-align">The Code</h2>

				<div class="row project-content">
					<div class="col l3 media-container">
						<img class="project-photo media-icon"
							 src="https://firebasestorage.googleapis.com/v0/b/william-9ab03.appspot.com/o/projectImages%2Fapollo_rides%2Fgithub.png?alt=media&token=2d598236-ed2a-467f-9529-285388ce84d4">
					</div>
					<div class="col l9 project-description">
						<p>
							The Angular 4 front-end application can be found <a target="_blank" href="https://github.com/william2958/FratHouse">here</a>
						</p>
					</div>
				</div>

			</div>

		</div>

		<div class="col hide-on-small-only m3 l2">
			<div class="toc-wrapper pinned">
				<div class="toc-margin">

					<div style="height: 1px;">
						<div class="toc-header">Table of Contents</div>
						<ul class="section table-of-contents">
							<li><a href="#overview">Overview</a></li>
							<li><a href="#functionality">Functionality</a></li>
							<li><a href="#authentication">Authentication</a></li>
							<li><a href="#database">Database</a></li>
							<li><a href="#functions">Functions</a></li>
							<li><a href="#code">The Code</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
